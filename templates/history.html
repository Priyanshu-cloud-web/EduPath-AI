<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>History - EduPath AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .history { max-width: 1000px; margin: 40px auto; padding: 20px; }
        .entry { background: white; padding: 24px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 24px; border-left: 5px solid #3B82F6; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .name { font-weight: 600; color: #1E3A8A; font-size: 18px; }
        .meta { color: #6B7280; font-size: 14px; }
        .summary { margin-bottom: 20px; color: #4B5563; line-height: 1.7; }
        .recs { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; }
        .rec-item { background: #F3F4F6; padding: 16px; border-radius: 8px; }
        .rec-item strong { color: #1E3A8A; }
    </style>
</head>
<body>

<nav>
    <div style="max-width:1200px; margin:auto; display:flex; justify-content:space-between; align-items:center; padding:20px 0;">
        <h1>EduPath AI</h1>
        <ul style="display:flex; gap:30px; list-style:none;">
            <li><a href="/" style="color:white; text-decoration:none;">Home</a></li>
            <li><a href="/dashboard" style="color:white; text-decoration:none;">Dashboard</a></li>
            <li><a href="/history" style="color:white; text-decoration:none; font-weight:600;">History</a></li>
        </ul>
    </div>
</nav>

<div class="history">
    <h2 style="text-align:center; color:#1E3A8A; margin-bottom:40px; font-size:32px;">Your Recommendation History</h2>

    {% if history %}
        {% for h in history %}
        <div class="entry">
            <div class="header">
                <div class="name">{{ h.name }} {% if h.cgpa %}(CGPA: {{ h.cgpa }}){% endif %}</div>
                <div class="meta">{{ h.timestamp[:16].replace("T", " ") }}</div>
            </div>
            <div class="summary">{{ h.summary }}</div>
            <div class="recs">
                {% for type, data in h.recs %}
                    {% if type == 'course' %}
                        <div class="rec-item"><strong>Course:</strong> {{ data.name }}</div>
                    {% elif type == 'career' %}
                        <div class="rec-item"><strong>Career:</strong> {{ data.name }}</div>
                    {% elif type == 'job' %}
                        <div class="rec-item">
                            <strong>Job:</strong> {{ data.title }} at {{ data.company }}<br>
                            <small>{{ data.location }}</small><br>
                            <a href="{{ data.link }}" target="_blank" style="color:#3B82F6; font-size:13px;">Apply</a>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p style="text-align:center; color:#6B7280; padding:60px; background:#F9FAFB; border-radius:12px;">
            No history yet. Submit your first profile!
        </p>
    {% endif %}
</div>

</body>
</html>